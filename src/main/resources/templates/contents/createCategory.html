<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header">
    <div th:replace="fragments/bodyHeader :: bodyHeader"/>
<body>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
<script type="text/javascript" th:inline="javascript"
        th:src="@{js/get.js}"></script>
<div class="category">
    <form class="container">
        <div class="form-group">
            <h2 style="background: #bfd1ec">카테고리 등록하기 </h2>
            <h3>카테고리 이름</h3>
            <input name="name" type="text" id="name" placeholder="카테고리 이름을 입력하세요"/>
        </div>
        <div class="form-group">
            <h3>가중치 </h3>
            <!-- name="content" 추가, DTO의 필드명과 일치해야 함! -->
            <input name="weight" id="weight" placeholder="가중치를 입력하세요"/>
        </div>
        <!-- type="button"으로 변경, id값 추가 -->
        <br/>
        <button type="button" onclick="add()" id="category-btn" style="width: 190px;">제출</button>
    </form>
</div>
</body>
</html>
<Script>
    // article 객체 생성
    function add() {

        // form 데이터를 JSON으로 만듬
        const name = document.getElementById("name").value;
        const weight = document.getElementById("weight").value;

        var sendData = {name: name, weight: weight};
        var jsonData = JSON.stringify(sendData);
        alert(JSON.stringify(sendData)); // 위에서 만든 폼 데이터(data)를 함께 보냄.
        $.ajax({
            url: '/create/category'
            , contentType: 'application/json; charset=UTF-8'
            , method: 'POST'
            , data: jsonData
            , dataType: 'json'
            , success: function (resp) {
            }
        })
        return window.location.href = '/categoryList';
    }

</script>